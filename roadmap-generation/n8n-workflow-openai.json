{
  "name": "30 Day AI Roadmap Generator (OpenAI)",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "roadmap-request",
        "responseMode": "lastNode",
        "options": {}
      },
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [250, 300],
      "webhookId": "roadmap-request"
    },
    {
      "parameters": {
        "functionCode": "// Get customer data from webhook\nconst data = $input.item.json;\n\n// Load prompt template\nconst promptTemplate = `\nB√∫√∞u til 30 daga AI innlei√∞ingar roadmap fyrir eftirfarandi fyrirt√¶ki:\n\n**FYRIRT√ÜKJAUPPL√ùSINGAR:**\n- Fyrirt√¶ki: ${data.companyName}\n- I√∞na√∞ur: ${data.industry}\n- Fj√∂ldi starfsmanna: ${data.employees}\n- Netfang: ${data.email}\n\n**N√öVERANDI STA√êA:**\n- Helstu √°skoranir: ${data.currentChallenges}\n- Markmi√∞ me√∞ AI: ${data.goals}\n- N√∫verandi t√≥l: ${data.currentTools}\n- T√≠mal√≠na: ${data.timeline}\n\n---\n\n## MIKILV√ÜGT:\n\nSkrifa√∞u roadmap √≠ Markdown formati me√∞ eftirfarandi sections:\n\n1. EXECUTIVE SUMMARY\n   - Yfirlit fyrirt√¶kisins\n   - Top 3-5 greindar √°skoranir\n   - Top 5 AI t√¶kif√¶ri me√∞ ROI estimate\n   - √Å√¶tla√∞ur √°vinningur (t√≠masparna√∞ur + kostna√∞ur)\n\n2. 30 DAGA √Å√ÜTLUN\n   Fyrir hvern dag (1-30), l√°ttu fylgja:\n   - Dagur X: [Title]\n   - Verkefni: [bullet list]\n   - T√≠mi: [estimate]\n   - Hverjir: [roles]\n   - Tilgangur: [benefit]\n\n3. TOOL RECOMMENDATIONS\n   5-7 verkf√¶ri me√∞:\n   - Nafn\n   - Hva√∞ √æa√∞ gerir\n   - Ver√∞ (√≠ ISK)\n   - Use cases\n   - ROI estimate\n   - Setup lei√∞beiningar\n\n4. MEASURING SUCCESS\n   - 5 KPIs\n   - Hvernig √° a√∞ m√¶la\n   - Milestones per viku\n\n5. COMMON PITFALLS\n   - 3-5 pitfalls + solutions\n\n6. RESOURCES\n   - 3-5 prompt templates\n   - Support info\n   - Next steps\n\n**Mikilv√¶gt:**\n- Skrifa√∞u √° √≠slensku\n- S√©rsn√≠√∞a√∞u fyrir ${data.industry}\n- Vertu specific og hagn√Ωtur\n- Engin generic r√°√∞\n- Raunh√¶f t√≠mam√∂t\n- Quick wins fyrstu dagana\n\nLengd: 4000-6000 or√∞\n`;\n\nreturn {\n  json: {\n    prompt: promptTemplate,\n    customerData: data\n  }\n};"
      },
      "name": "Prepare Prompt",
      "type": "n8n-nodes-base.code",
      "typeVersion": 1,
      "position": [450, 300]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.openai.com/v1/chat/completions",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": []
        },
        "jsonBody": "={\n  \"model\": \"gpt-4o\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"√û√∫ ert reynslumikill AI r√°√∞gjafi hj√° LioraTech sem s√©rh√¶fir √æig √≠ a√∞ hj√°lpa √≠slenskum fyrirt√¶kjum a√∞ innlei√∞a gervigreind. √û√∫ b√∫r√∞ til hagn√Ωt, s√©rsni√∞in 30 daga roadmap √° √≠slensku.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"{{ $json.prompt }}\"\n    }\n  ],\n  \"max_tokens\": 16000,\n  \"temperature\": 0.7\n}",
        "options": {}
      },
      "name": "OpenAI API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4,
      "position": [650, 300],
      "credentials": {
        "httpHeaderAuth": {
          "id": "1",
          "name": "OpenAI API Key"
        }
      }
    },
    {
      "parameters": {
        "functionCode": "// Parse OpenAI response (different structure than Claude)\nconst response = $input.item.json;\nconst roadmapContent = response.choices[0].message.content;\nconst customerData = $('Prepare Prompt').item.json.customerData;\n\n// Create email subject - for internal use\nconst subject = `üöÄ N√Ωtt Roadmap tilb√∫i√∞: ${customerData.companyName}`;\n\n// Create email body - for YOU to review\nconst emailBody = `\nH√¶ Ingi,\n\nN√Ωtt roadmap er tilb√∫i√∞ og √æarfnast review √°√∞ur en √æa√∞ fer til vi√∞skiptavinar.\n\nüìã VI√êSKIPTAVINUR:\n- Fyrirt√¶ki: ${customerData.companyName}\n- Netfang: ${customerData.email}\n- I√∞na√∞ur: ${customerData.industry}\n- Starfsmenn: ${customerData.employees}\n\nüéØ MARKMI√ê:\n${customerData.goals}\n\n‚ö†Ô∏è √ÅSKORANIR:\n${customerData.currentChallenges}\n\nüõ†Ô∏è N√öVERANDI T√ìL:\n${customerData.currentTools}\n\n‚è∞ T√çMAL√çNA:\n${customerData.timeline}\n\n---\n\nRoadmap-i√∞ er √≠ vi√∞hengi. Review √æa√∞ og sendu svo handvirkt √° ${customerData.email}.\n\n‚úÖ TODO:\n1. Lesa roadmap\n2. Quality check\n3. Forward til ${customerData.email}\n4. B√≥ka 20 m√≠n follow-up: https://calendly.com/lioratech/20min\n\n---\n\nLioraTech Roadmap Generator\n`;\n\n// Create filename\nconst filename = `${customerData.companyName.replace(/[^a-z0-9]/gi, '_')} - 30 Daga AI Roadmap.md`;\n\nreturn {\n  json: {\n    email: 'info@lioratech.is',  // SEND TO YOU, not customer\n    customerEmail: customerData.email,  // Save for reference\n    subject: subject,\n    body: emailBody,\n    roadmapContent: roadmapContent,\n    filename: filename,\n    companyName: customerData.companyName\n  }\n};"
      },
      "name": "Prepare Email",
      "type": "n8n-nodes-base.code",
      "typeVersion": 1,
      "position": [850, 300]
    },
    {
      "parameters": {
        "operation": "sendEmail",
        "fromEmail": "info@lioratech.is",
        "toEmail": "={{ $json.email }}",
        "subject": "={{ $json.subject }}",
        "emailType": "text",
        "message": "={{ $json.body }}",
        "options": {
          "attachments": "={{ $json.filename }}",
          "allowUnauthorizedCerts": false
        },
        "attachments": "={{ $json.filename }}"
      },
      "name": "Send Email",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2,
      "position": [1050, 300],
      "credentials": {
        "gmailOAuth2": {
          "id": "2",
          "name": "Gmail account"
        }
      },
      "executeOnce": false
    },
    {
      "parameters": {
        "functionCode": "// Create binary data for attachment\nconst roadmapContent = $input.item.json.roadmapContent;\nconst filename = $input.item.json.filename;\n\n// Convert to binary\nconst binaryData = Buffer.from(roadmapContent, 'utf-8');\n\n// Return with binary attachment\nreturn {\n  json: $input.item.json,\n  binary: {\n    data: {\n      data: binaryData.toString('base64'),\n      mimeType: 'text/markdown',\n      fileName: filename\n    }\n  }\n};"
      },
      "name": "Create Attachment",
      "type": "n8n-nodes-base.code",
      "typeVersion": 1,
      "position": [950, 300]
    },
    {
      "parameters": {
        "functionCode": "// Log successful delivery\nconst companyName = $input.item.json.companyName;\nconst email = $input.item.json.email;\nconst timestamp = new Date().toISOString();\n\nconsole.log(`‚úÖ Roadmap delivered to ${companyName} (${email}) at ${timestamp}`);\n\nreturn {\n  json: {\n    success: true,\n    message: `Roadmap sent to ${email}`,\n    timestamp: timestamp\n  }\n};"
      },
      "name": "Log Success",
      "type": "n8n-nodes-base.code",
      "typeVersion": 1,
      "position": [1250, 300]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {}
      },
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [1450, 300]
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Prepare Prompt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare Prompt": {
      "main": [
        [
          {
            "node": "OpenAI API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI API": {
      "main": [
        [
          {
            "node": "Prepare Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare Email": {
      "main": [
        [
          {
            "node": "Create Attachment",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Attachment": {
      "main": [
        [
          {
            "node": "Send Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Email": {
      "main": [
        [
          {
            "node": "Log Success",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Log Success": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2025-11-30T10:20:00.000Z",
  "versionId": "1"
}
